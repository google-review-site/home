<!DOCTYPE html>
<html>

<head>
    <title>google reviews</title>
    <script>
        let url = window.location.href;
        if (url && url.includes('?')) {

            let param = url.split('?')[1];
            console.log('param ', param);
            let query = 'SELECT A,B,C,D WHERE A = ' + param;
            console.log('dd ', query)
            query = encodeURIComponent(query);
            console.log('query ', query);

            let apiUrl = 'https://spreadsheets.google.com/tq?key=1gsv48ca2LQLHMq2Tfg2DU0VZmf-u_QbqsuW-yeyOy8M&sheet=Data&tq=' + query;

            console.log('apiUrl ' + apiUrl);
            let headers = new Headers();
            headers.append('Content-Type', 'application/json');
            headers.append('Accept', 'application/json');
            headers.append('Authorization', 'Basic ');
            headers.append('Origin', 'http://localhost:3000');
            
            var requestOptions = {
                mode:'cors',
                method: 'GET',
                headers: headers,
                redirect: 'follow'
            };

            fetch(apiUrl, requestOptions)
                .then(response => response.text())
                .then(result => console.log(result))
                .catch(error => console.log('error', error));
        }
    </script>

</head>

<body>


    <h1>My First Headingd</h1>
    <p>My first paragraph.</p>

</body>

</html>
